define("parsley/validator",["validator"],function(b){var a=function(d,c){this.__class__="ParsleyValidator";this.Validator=b;this.locale="en";this.init(d||{},c||{})};a.prototype={init:function(d,c){this.catalog=c;for(var e in d){this.addValidator(e,d[e].fn,d[e].priority)}$.emit("parsley:validator:init")},setLocale:function(c){if("undefined"===typeof this.catalog[c]){throw new Error(c+" is not available in the catalog")}this.locale=c;return this},addCatalog:function(c,d,e){if("object"===typeof d){this.catalog[c]=d}if(true===e){return this.setLocale(c)}return this},addMessage:function(c,d,e){if(undefined===typeof this.catalog[c]){this.catalog[c]={}}this.catalog[c][d.toLowerCase()]=e;return this},validate:function(d,e,c){return new this.Validator.Validator().validate.apply(new b.Validator(),arguments)},addValidator:function(c,e,d){this.validators[c.toLowerCase()]=function(f){return $.extend(new b.Assert().Callback(e,f),{priority:d})};return this},updateValidator:function(c,e,d){return addValidator(c,e,d)},removeValidator:function(c){delete this.validators[c];return this},getErrorMessage:function(d){var c;if("type"===d.name){c=this.catalog[this.locale][d.name][d.requirements]}else{c=this.formatMessage(this.catalog[this.locale][d.name],d.requirements)}return""!==c?c:this.catalog[this.locale].defaultMessage},formatMessage:function(c,e){if("object"===typeof e){for(var d in e){c=this.formatMessage(c,e[d])}return c}return"string"===typeof c?c.replace(new RegExp("%s","i"),e):""},validators:{notblank:function(){return $.extend(new b.Assert().NotBlank(),{priority:2})},required:function(){return $.extend(new b.Assert().Required(),{priority:512})},type:function(d){var c;switch(d){case"email":c=new b.Assert().Email();break;case"number":c=new b.Assert().Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":c=new b.Assert().Regexp("^-?\\d+$");break;case"digits":c=new b.Assert().Regexp("^\\d+$");break;case"alphanum":c=new b.Assert().Regexp("^\\w+$","i");break;case"url":c=new b.Assert().Regexp("(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,4}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)","i");break;default:throw new Error("validator type `"+d+"` is not supported")}return $.extend(c,{priority:256})},pattern:function(d){var c="";if(!!(/^\/.*\/(?:[gimy]*)$/.test(d))){c=d.replace(/.*\/([gimy]*)$/,"$1");d=d.replace(new RegExp("^/(.*?)/"+c+"$"),"$1")}return $.extend(new b.Assert().Regexp(d,c),{priority:64})},minlength:function(c){return $.extend(new b.Assert().Length({min:c}),{priority:30,requirementsTransformer:function(){return"string"===typeof c&&!isNaN(c)?parseInt(c,10):c}})},maxlength:function(c){return $.extend(new b.Assert().Length({max:c}),{priority:30,requirementsTransformer:function(){return"string"===typeof c&&!isNaN(c)?parseInt(c,10):c}})},length:function(c){return $.extend(new b.Assert().Length({min:c[0],max:c[1]}),{priority:32})},mincheck:function(c){return this.minlength(c)},maxcheck:function(c){return this.maxlength(c)},check:function(c){return this.length(c)},min:function(c){return $.extend(new b.Assert().GreaterThanOrEqual(c),{priority:30,requirementsTransformer:function(){return"string"===typeof c&&!isNaN(c)?parseInt(c,10):c}})},max:function(c){return $.extend(new b.Assert().LessThanOrEqual(c),{priority:30,requirementsTransformer:function(){return"string"===typeof c&&!isNaN(c)?parseInt(c,10):c}})},range:function(c){return $.extend(new b.Assert().Range(c[0],c[1]),{priority:32,requirementsTransformer:function(){for(var d=0;d<c.length;d++){c[d]="string"===typeof c[d]&&!isNaN(c[d])?parseInt(c[d],10):c[d]}return c}})},equalto:function(c){return $.extend(new b.Assert().EqualTo(c),{priority:256,requirementsTransformer:function(){return $(c).length?$(c).val():c}})}}};return a});