define("parsley/pubsub",["parsley/field","parsley/form"],function(b,a){var d=$({}),c={};$.listen=function(e){if("undefined"===typeof c[e]){c[e]=[]}if("function"===typeof arguments[1]){return c[e].push({fn:arguments[1]})}if("object"===typeof arguments[1]&&"function"===typeof arguments[2]){return c[e].push({fn:arguments[2],ctxt:arguments[1]})}throw new Error("Wrong parameters")};$.listenTo=function(e,f,g){if("undefined"===typeof c[f]){c[f]=[]}if(!(e instanceof b)&&!(e instanceof a)){throw new Error("Must give Parsley instance")}if("string"!==typeof f||"function"!==typeof g){throw new Error("Wrong parameters")}c[f].push({instance:e,fn:g})};$.unsubscribe=function(e,g){if("undefined"===typeof c[e]){return}if("string"!==typeof e||"function"!==typeof g){throw new Error("Wrong arguments")}for(var f=0;f<c[e].length;f++){if(c[e][f].fn===g){return c[e].splice(f,1)}}};$.unsubscribeTo=function(e,f){if("undefined"===typeof c[f]){return}if(!(e instanceof b)&&!(e instanceof a)){throw new Error("Must give Parsley instance")}for(var g=0;g<c[f].length;g++){if("undefined"!==typeof c[f][g].instance&&c[f][g].instance.__id__===e.__id__){return c[f].splice(g,1)}}};$.unsubscribeAll=function(e){if("undefined"===typeof c[e]){return}delete c[e]};$.emit=function(g,e){if("undefined"===typeof c[g]){return}for(var h=0;h<c[g].length;h++){if("undefined"===typeof c[g][h].instance){c[g][h].fn.apply("undefined"!==typeof c[g][h].ctxt?c[g][h].ctxt:d,Array.prototype.slice.call(arguments,1));continue}if(!(e instanceof b)&&!(e instanceof a)){continue}if(c[g][h].instance.__id__===e.__id__){c[g][h].fn.apply(d,Array.prototype.slice.call(arguments,1));continue}if(c[g][h].instance instanceof a&&e instanceof b){for(var f=0;f<c[g][h].instance.fields.length;f++){if(c[g][h].instance.fields[f].__id__===e.__id__){c[g][h].fn.apply(d,Array.prototype.slice.call(arguments,1));continue}}}}};$.subscribed=function(){return c}});