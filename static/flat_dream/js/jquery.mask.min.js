"use strict";(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a(require("jquery"))}else{a(jQuery||Zepto)}}}(function(d){var f=function(k,h,j){var m={invalid:[],getCaret:function(){try{var p,s=0,o=k.get(0),n=document.selection,r=o.selectionStart;if(n&&navigator.appVersion.indexOf("MSIE 10")===-1){p=n.createRange();p.moveStart("character",-m.val().length);s=p.text.length}else{if(r||r==="0"){s=r}}return s}catch(q){}},setCaret:function(q){try{if(k.is(":focus")){var n,o=k.get(0);if(o.setSelectionRange){o.focus();o.setSelectionRange(q,q)}else{n=o.createTextRange();n.collapse(true);n.moveEnd("character",q);n.moveStart("character",q);n.select()}}}catch(p){}},events:function(){k.on("keydown.mask",function(n){k.data("mask-keycode",n.keyCode||n.which)}).on(d.jMaskGlobals.useInput?"input.mask":"keyup.mask",m.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){k.keydown().keyup()},100)}).on("change.mask",function(){k.data("changed",true)}).on("blur.mask",function(){if(i!==m.val()&&!k.data("changed")){k.trigger("change")}k.data("changed",false)}).on("blur.mask",function(){i=m.val()}).on("focus.mask",function(n){if(j.selectOnFocus===true){d(n.target).select()}}).on("focusout.mask",function(){if(j.clearIfNotMatch&&!g.test(m.val())){m.val("")}})},getRegexMask:function(){var p=[],v,u,o,n,t,s;for(var q=0;q<h.length;q++){v=l.translation[h.charAt(q)];if(v){u=v.pattern.toString().replace(/.{1}$|^.{1}/g,"");o=v.optional;n=v.recursive;if(n){p.push(h.charAt(q));t={digit:h.charAt(q),pattern:u}}else{p.push(!o&&!n?u:(u+"?"))}}else{p.push(h.charAt(q).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}}s=p.join("");if(t){s=s.replace(new RegExp("("+t.digit+"(.*"+t.digit+")?)"),"($1)?").replace(new RegExp(t.digit,"g"),t.pattern)}return new RegExp(s)},destroyEvents:function(){k.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(n){var o=k.is("input"),q=o?"val":"text",p;if(arguments.length>0){if(k[q]()!==n){k[q](n)}p=k}else{p=k[q]()}return p},getMCharsBeforeCount:function(o,n){for(var q=0,p=0,r=h.length;p<r&&p<o;p++){if(!l.translation[h.charAt(p)]){o=n?o+1:o;q++}}return q},caretPos:function(r,n,o,q){var p=l.translation[h.charAt(Math.min(r-1,h.length-1))];return !p?m.caretPos(r+1,n,o,q):Math.min(r+o-n-q,o)},behaviour:function(r){r=r||window.event;m.invalid=[];var u=k.data("mask-keycode");if(d.inArray(u,l.byPassKeys)===-1){var q=m.getCaret(),o=m.val(),s=o.length,n=m.getMasked(),v=n.length,t=m.getMCharsBeforeCount(v-1)-m.getMCharsBeforeCount(s-1),p=q<s;m.val(n);if(p){if(!(u===8||u===46)){q=m.caretPos(q,s,v,t)}m.setCaret(q)}return m.callbacks(r)}},getMasked:function(B,s){var r=[],C=s===undefined?m.val():s+"",u=0,z=h.length,D=0,q=C.length,y=1,x="push",t=-1,E,p;if(j.reverse){x="unshift";y=-1;E=0;u=z-1;D=q-1;p=function(){return u>-1&&D>-1}}else{E=z-1;p=function(){return u<z&&D<q}}while(p()){var w=h.charAt(u),o=C.charAt(D),n=l.translation[w];if(n){if(o.match(n.pattern)){r[x](o);if(n.recursive){if(t===-1){t=u}else{if(u===E){u=t-y}}if(E===t){u-=y}}u+=y}else{if(n.optional){u+=y;D-=y}else{if(n.fallback){r[x](n.fallback);u+=y;D-=y}else{m.invalid.push({p:D,v:o,e:n.pattern})}}}D+=y}else{if(!B){r[x](w)}if(o===w){D+=y}u+=y}}var A=h.charAt(E);if(z===q+1&&!l.translation[A]){r.push(A)}return r.join("")},callbacks:function(o){var q=m.val(),p=q!==i,n=[q,o,k,j],r=function(t,u,s){if(typeof j[t]==="function"&&u){j[t].apply(this,s)}};r("onChange",p===true,n);r("onKeyPress",p===true,n);r("onComplete",q.length===h.length,n);r("onInvalid",m.invalid.length>0,[q,o,k,m.invalid,j])}};k=d(k);var l=this,i=m.val(),g;h=typeof h==="function"?h(m.val(),undefined,k,j):h;l.mask=h;l.options=j;l.remove=function(){var n=m.getCaret();m.destroyEvents();m.val(l.getCleanVal());m.setCaret(n-m.getMCharsBeforeCount(n));return k};l.getCleanVal=function(){return m.getMasked(true)};l.getMaskedVal=function(n){return m.getMasked(false,n)};l.init=function(n){n=n||false;j=j||{};l.clearIfNotMatch=d.jMaskGlobals.clearIfNotMatch;l.byPassKeys=d.jMaskGlobals.byPassKeys;l.translation=d.extend({},d.jMaskGlobals.translation,j.translation);l=d.extend(true,{},l,j);g=m.getRegexMask();if(n===false){if(j.placeholder){k.attr("placeholder",j.placeholder)}if(k.data("mask")){k.attr("autocomplete","off")}m.destroyEvents();m.events();var o=m.getCaret();m.val(m.getMasked());m.setCaret(o+m.getMCharsBeforeCount(o,true))}else{m.events();m.val(m.getMasked())}};l.init(!k.is("input"))};d.maskWatchers={};var e=function(){var h=d(this),i={},j="data-mask-",g=h.attr("data-mask");if(h.attr(j+"reverse")){i.reverse=true}if(h.attr(j+"clearifnotmatch")){i.clearIfNotMatch=true}if(h.attr(j+"selectonfocus")==="true"){i.selectOnFocus=true}if(a(h,g,i)){return h.data("mask",new f(this,g,i))}},a=function(k,g,h){h=h||{};var l=d(k).data("mask"),m=JSON.stringify,i=d(k).val()||d(k).text();try{if(typeof g==="function"){g=g(i)}return typeof l!=="object"||m(l.options)!==m(h)||l.mask!==g}catch(j){}},c=function(g){var i=document.createElement("div"),h;g="on"+g;h=(g in i);if(!h){i.setAttribute(g,"return;");h=typeof i[g]==="function"}i=null;return h};d.fn.mask=function(h,l){l=l||{};var g=this.selector,m=d.jMaskGlobals,j=m.watchInterval,k=l.watchInputs||m.watchInputs,i=function(){if(a(this,h,l)){return d(this).data("mask",new f(this,h,l))}};d(this).each(i);if(g&&g!==""&&k){clearInterval(d.maskWatchers[g]);d.maskWatchers[g]=setInterval(function(){d(document).find(g).each(i)},j)}return this};d.fn.masked=function(g){return this.data("mask").getMaskedVal(g)};d.fn.unmask=function(){clearInterval(d.maskWatchers[this.selector]);delete d.maskWatchers[this.selector];return this.each(function(){var g=d(this).data("mask");if(g){g.remove().removeData("mask")}})};d.fn.cleanVal=function(){return this.data("mask").getCleanVal()};d.applyDataMask=function(g){g=g||d.jMaskGlobals.maskElements;var h=(g instanceof d)?g:d(g);h.filter(d.jMaskGlobals.dataMaskAttr).each(e)};var b={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:true,watchInterval:300,watchInputs:true,useInput:c("input"),watchDataMask:false,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{"0":{pattern:/\d/},"9":{pattern:/\d/,optional:true},"#":{pattern:/\d/,recursive:true},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};d.jMaskGlobals=d.jMaskGlobals||{};b=d.jMaskGlobals=d.extend(true,{},b,d.jMaskGlobals);if(b.dataMask){d.applyDataMask()}setInterval(function(){if(d.jMaskGlobals.watchDataMask){d.applyDataMask()}},b.watchInterval)}));